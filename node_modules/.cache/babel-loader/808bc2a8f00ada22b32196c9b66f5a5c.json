{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{connect}from'react-redux';import*as shopActionTypes from'../../store/actions/shop';import*as cartActionTypes from'../../store/actions/cart';import Spinner from'../UI/Spinner/Spinner';import ProductItem from'../ProductItem/ProductItem';import'./ProductList.css';import{jsx as _jsx}from\"react/jsx-runtime\";var ProductList=function ProductList(props){var navigate=useNavigate();useEffect(function(){props.onFetchProducts();},[]);var productList=/*#__PURE__*/_jsx(Spinner,{});var addProductToCart=function addProductToCart(productId){navigate('/cart',{replace:true});props.onAddToCart(props.token,props.userId,productId);};if(!props.loading){productList=Object.entries(props.products).map(function(product,index){if(index===0){return Object.entries(product[1]).map(function(innerProduct){if(innerProduct[0]==='value'){return innerProduct[1].map(function(actualProduct){return/*#__PURE__*/_jsx(ProductItem,{isAdmin:props.isAdmin,isEdit:false,productId:actualProduct._id,title:actualProduct.title,price:actualProduct.price,description:actualProduct.description,imageUrl:actualProduct.imageUrl,token:props.token,addToCart:addProductToCart},actualProduct.title);});}});}});}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"product__list\",children:productList})});};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onFetchProducts:function onFetchProducts(){dispatch(shopActionTypes.asyncFetchProductsStart());},onAddToCart:function onAddToCart(token,userId,productId){dispatch(cartActionTypes.asyncAddToCartStart(token,userId,productId));}};};var mapStateToProps=function mapStateToProps(state){return{products:state.shop.products,loading:state.shop.loading,token:state.auth.token,userId:state.auth.userId};};export default connect(mapStateToProps,mapDispatchToProps)(ProductList);","map":{"version":3,"names":["React","useEffect","useNavigate","connect","shopActionTypes","cartActionTypes","Spinner","ProductItem","ProductList","props","navigate","onFetchProducts","productList","addProductToCart","productId","replace","onAddToCart","token","userId","loading","Object","entries","products","map","product","index","innerProduct","actualProduct","isAdmin","_id","title","price","description","imageUrl","mapDispatchToProps","dispatch","asyncFetchProductsStart","asyncAddToCartStart","mapStateToProps","state","shop","auth"],"sources":["A:/PORTFÃ“LIO/ProjetoNodeShopComRestAPI/front-end-react/src/components/ProductList/ProductList.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\n\r\n\r\nimport * as shopActionTypes from '../../store/actions/shop';\r\nimport * as cartActionTypes from '../../store/actions/cart';\r\n\r\nimport Spinner from '../UI/Spinner/Spinner';\r\nimport ProductItem from '../ProductItem/ProductItem';\r\n\r\nimport './ProductList.css';\r\n\r\nconst ProductList = (props) => {\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    props.onFetchProducts();\r\n  }, []);\r\n\r\n  let productList = <Spinner></Spinner>;\r\n\r\n  const addProductToCart = (productId) => {\r\n    navigate('/cart', { replace: true });\r\n    props.onAddToCart(props.token, props.userId, productId);\r\n  };\r\n\r\n  if (!props.loading) {\r\n    productList = Object.entries(props.products).map((product, index) => {\r\n      if (index === 0) {\r\n        return Object.entries(product[1]).map((innerProduct) => {\r\n          if (innerProduct[0] === 'value') {\r\n            return innerProduct[1].map((actualProduct) => {\r\n              return (\r\n                <ProductItem\r\n                  isAdmin={props.isAdmin}\r\n                  isEdit={false}\r\n                  productId={actualProduct._id}\r\n                  key={actualProduct.title}\r\n                  title={actualProduct.title}\r\n                  price={actualProduct.price}\r\n                  description={actualProduct.description}\r\n                  imageUrl={actualProduct.imageUrl}\r\n                  token={props.token}\r\n                  addToCart={addProductToCart}\r\n                ></ProductItem>\r\n              );\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"product__list\">{productList}</div>\r\n      {/* {redirectToCart} */}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onFetchProducts: () => {\r\n      dispatch(shopActionTypes.asyncFetchProductsStart());\r\n    },\r\n    onAddToCart: (token, userId, productId) => {\r\n      dispatch(cartActionTypes.asyncAddToCartStart(token, userId, productId));\r\n    },\r\n  };\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.shop.products,\r\n    loading: state.shop.loading,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}