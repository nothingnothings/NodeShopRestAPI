{"ast":null,"code":"import { updateObject } from '../../shared/util';\nimport * as cartActionTypes from '../actions/cartActionTypes';\nconst initialState = {\n  error: false,\n  products: [],\n  totalPrice: 0,\n  loading: false\n};\n\nconst fetchCartSuccess = (state, action) => {\n  return updateObject(state, {\n    loading: false,\n    products: action.cart.products,\n    totalPrice: action.cart.totalPrice\n  });\n};\n\nconst fetchCartFail = (state, action) => {\n  return updateObject(state, {\n    loading: false,\n    error: action.error\n  });\n};\n\nconst removeFromCartStart = (state, action) => {\n  return updateObject(state, {\n    loading: true\n  });\n};\n\nconst removeFromCartSuccess = (state, action) => {\n  let updatedProducts = state.products;\n  updatedProducts = updatedProducts.filter(product => {\n    return product.id !== action.productId;\n  });\n  const totalPrice = state.totalPrice;\n  const removedProduct = state.products.find(product => {\n    return product.id === action.productId;\n  });\n  const totalProductPrice = removedProduct.price * removedProduct.quantity;\n  return updateObject(state, {\n    loading: false,\n    products: updatedProducts,\n    totalPrice: totalPrice - totalProductPrice\n  });\n};\n\nconst cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case cartActionTypes.FETCH_CART_START:\n      return updateObject(state, {\n        loading: true\n      });\n\n    case cartActionTypes.FETCH_CART_SUCCESS:\n      return fetchCartSuccess(state, action);\n\n    case cartActionTypes.FETCH_CART_FAIL:\n      return fetchCartFail(state, action);\n\n    case cartActionTypes.REMOVE_PRODUCT_FROM_CART_START:\n      return;\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"names":["updateObject","cartActionTypes","initialState","error","products","totalPrice","loading","fetchCartSuccess","state","action","cart","fetchCartFail","removeFromCartStart","removeFromCartSuccess","updatedProducts","filter","product","id","productId","removedProduct","find","totalProductPrice","price","quantity","cartReducer","type","FETCH_CART_START","FETCH_CART_SUCCESS","FETCH_CART_FAIL","REMOVE_PRODUCT_FROM_CART_START"],"sources":["A:/PORTFÃ“LIO/ProjetoNodeShopComRestAPI/front-end-react/src/store/reducers/cartReducer.js"],"sourcesContent":["import { updateObject } from '../../shared/util';\r\nimport * as cartActionTypes from '../actions/cartActionTypes';\r\n\r\nconst initialState = {\r\n  error: false,\r\n  products: [],\r\n  totalPrice: 0,\r\n  loading: false,\r\n};\r\n\r\nconst fetchCartSuccess = (state, action) => {\r\n  return updateObject(state, {\r\n    loading: false,\r\n    products: action.cart.products,\r\n    totalPrice: action.cart.totalPrice,\r\n  });\r\n};\r\n\r\nconst fetchCartFail = (state, action) => {\r\n  return updateObject(state, {\r\n    loading: false,\r\n    error: action.error,\r\n  });\r\n};\r\n\r\n\r\nconst removeFromCartStart = (state, action) => {\r\n  return updateObject(state,\r\n     {\r\n      loading: true\r\n     })\r\n}\r\n\r\n\r\nconst removeFromCartSuccess = (state, action) => {\r\n\r\n\r\n  let updatedProducts = state.products;\r\n\r\n\r\n updatedProducts = updatedProducts.filter(\r\n  (product) => {\r\n    return product.id !== action.productId\r\n  }\r\n )\r\n\r\n const totalPrice = state.totalPrice;\r\n\r\n\r\n\r\n\r\n const removedProduct = state.products.find(\r\n\r\n  (product) => {\r\n      return product.id === action.productId;\r\n  }\r\n );\r\n\r\n\r\n const totalProductPrice = removedProduct.price * removedProduct.quantity;\r\n\r\n\r\n  return updateObject(state, {\r\n    loading: false,\r\n\r\n    products: updatedProducts,\r\n\r\n    totalPrice: totalPrice - totalProductPrice\r\n    \r\n  })\r\n}\r\n\r\n\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case cartActionTypes.FETCH_CART_START:\r\n      return updateObject(state, { loading: true });\r\n    case cartActionTypes.FETCH_CART_SUCCESS:\r\n      return fetchCartSuccess(state, action);\r\n    case cartActionTypes.FETCH_CART_FAIL:\r\n      return fetchCartFail(state, action);\r\n    case cartActionTypes.REMOVE_PRODUCT_FROM_CART_START:\r\n      return \r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cartReducer;\r\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,mBAA7B;AACA,OAAO,KAAKC,eAAZ,MAAiC,4BAAjC;AAEA,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,KADY;EAEnBC,QAAQ,EAAE,EAFS;EAGnBC,UAAU,EAAE,CAHO;EAInBC,OAAO,EAAE;AAJU,CAArB;;AAOA,MAAMC,gBAAgB,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;EAC1C,OAAOT,YAAY,CAACQ,KAAD,EAAQ;IACzBF,OAAO,EAAE,KADgB;IAEzBF,QAAQ,EAAEK,MAAM,CAACC,IAAP,CAAYN,QAFG;IAGzBC,UAAU,EAAEI,MAAM,CAACC,IAAP,CAAYL;EAHC,CAAR,CAAnB;AAKD,CAND;;AAQA,MAAMM,aAAa,GAAG,CAACH,KAAD,EAAQC,MAAR,KAAmB;EACvC,OAAOT,YAAY,CAACQ,KAAD,EAAQ;IACzBF,OAAO,EAAE,KADgB;IAEzBH,KAAK,EAAEM,MAAM,CAACN;EAFW,CAAR,CAAnB;AAID,CALD;;AAQA,MAAMS,mBAAmB,GAAG,CAACJ,KAAD,EAAQC,MAAR,KAAmB;EAC7C,OAAOT,YAAY,CAACQ,KAAD,EAChB;IACCF,OAAO,EAAE;EADV,CADgB,CAAnB;AAID,CALD;;AAQA,MAAMO,qBAAqB,GAAG,CAACL,KAAD,EAAQC,MAAR,KAAmB;EAG/C,IAAIK,eAAe,GAAGN,KAAK,CAACJ,QAA5B;EAGDU,eAAe,GAAGA,eAAe,CAACC,MAAhB,CAChBC,OAAD,IAAa;IACX,OAAOA,OAAO,CAACC,EAAR,KAAeR,MAAM,CAACS,SAA7B;EACD,CAHgB,CAAlB;EAMA,MAAMb,UAAU,GAAGG,KAAK,CAACH,UAAzB;EAKA,MAAMc,cAAc,GAAGX,KAAK,CAACJ,QAAN,CAAegB,IAAf,CAErBJ,OAAD,IAAa;IACT,OAAOA,OAAO,CAACC,EAAR,KAAeR,MAAM,CAACS,SAA7B;EACH,CAJqB,CAAvB;EAQA,MAAMG,iBAAiB,GAAGF,cAAc,CAACG,KAAf,GAAuBH,cAAc,CAACI,QAAhE;EAGC,OAAOvB,YAAY,CAACQ,KAAD,EAAQ;IACzBF,OAAO,EAAE,KADgB;IAGzBF,QAAQ,EAAEU,eAHe;IAKzBT,UAAU,EAAEA,UAAU,GAAGgB;EALA,CAAR,CAAnB;AAQD,CApCD;;AAwCA,MAAMG,WAAW,GAAG,YAAkC;EAAA,IAAjChB,KAAiC,uEAAzBN,YAAyB;EAAA,IAAXO,MAAW;;EACpD,QAAQA,MAAM,CAACgB,IAAf;IAEE,KAAKxB,eAAe,CAACyB,gBAArB;MACE,OAAO1B,YAAY,CAACQ,KAAD,EAAQ;QAAEF,OAAO,EAAE;MAAX,CAAR,CAAnB;;IACF,KAAKL,eAAe,CAAC0B,kBAArB;MACE,OAAOpB,gBAAgB,CAACC,KAAD,EAAQC,MAAR,CAAvB;;IACF,KAAKR,eAAe,CAAC2B,eAArB;MACE,OAAOjB,aAAa,CAACH,KAAD,EAAQC,MAAR,CAApB;;IACF,KAAKR,eAAe,CAAC4B,8BAArB;MACE;;IAEF;MACE,OAAOrB,KAAP;EAZJ;AAcD,CAfD;;AAiBA,eAAegB,WAAf"},"metadata":{},"sourceType":"module"}