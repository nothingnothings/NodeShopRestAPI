{"ast":null,"code":"import _slicedToArray from\"A:/PORTF\\xD3LIO/ProjetoNodeShopComRestAPI/front-end-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import{connect}from'react-redux';import*as cartActionTypes from'../../store/actions/cart';import Cart from'../../components/Cart/Cart';import CartItem from'../../components/Cart/CartItemList/CartItem/CartItem';import CartItemList from'../../components/Cart/CartItemList/CartItemList';import NoProduct from'../../components/Cart/NoProduct/NoProduct';import Spinner from'../../components/UI/Spinner/Spinner';import Wrapper from'../../components/Wrapper/Wrapper';import'./Cart.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartPage=function CartPage(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];useEffect(function(){setCurrentUser(props.token);if(currentUser){props.onFetchCart(props.token,props.userId);}},[currentUser]);var onRemoveProduct=function onRemoveProduct(product){var productId=product._id;props.onRemoveItem(props.token,props.userId,productId);};var cart=/*#__PURE__*/_jsx(Spinner,{});if(!props.loading&&props.cart.products.length===0){cart=/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(CartItemList,{children:/*#__PURE__*/_jsx(NoProduct,{children:/*#__PURE__*/_jsx(\"li\",{className:\"no-product cart-item\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"There are no products in your Cart.\"})})})})});}if(!props.loading&&props.cart.products.length>=1){cart=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CartItemList,{children:props.cart.products.map(function(product){return/*#__PURE__*/_jsx(CartItem,{productId:product.productId,quantity:product.quantity,onDelete:onRemoveProduct},product.productId._id);})}),/*#__PURE__*/_jsx(NavLink,{to:\"/checkout\",className:\"cart-btn\",children:\"Order Now!\"})]});}return/*#__PURE__*/_jsx(Cart,{children:cart});};var mapStateToProps=function mapStateToProps(state){return{cart:state.cart,loading:state.cart.loading,totalPrice:state.cart.totalPrice,error:state.cart.error,token:state.auth.token,userId:state.auth.userId};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onFetchCart:function onFetchCart(token,userId){dispatch(cartActionTypes.asyncFetchCartStart(token,userId));},onRemoveItem:function onRemoveItem(token,userId,productId){dispatch(cartActionTypes.asyncRemoveFromCartStart(token,userId,productId));}};};export default connect(mapStateToProps,mapDispatchToProps)(CartPage);","map":{"version":3,"names":["React","useEffect","useState","NavLink","connect","cartActionTypes","Cart","CartItem","CartItemList","NoProduct","Spinner","Wrapper","CartPage","props","currentUser","setCurrentUser","token","onFetchCart","userId","onRemoveProduct","product","productId","_id","onRemoveItem","cart","loading","products","length","map","quantity","mapStateToProps","state","totalPrice","error","auth","mapDispatchToProps","dispatch","asyncFetchCartStart","asyncRemoveFromCartStart"],"sources":["A:/PORTFÃ“LIO/ProjetoNodeShopComRestAPI/front-end-react/src/pages/Cart/Cart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as cartActionTypes from '../../store/actions/cart';\r\n\r\nimport Cart from '../../components/Cart/Cart';\r\nimport CartItem from '../../components/Cart/CartItemList/CartItem/CartItem';\r\nimport CartItemList from '../../components/Cart/CartItemList/CartItemList';\r\nimport NoProduct from '../../components/Cart/NoProduct/NoProduct';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport Wrapper from '../../components/Wrapper/Wrapper';\r\n\r\nimport './Cart.css';\r\n\r\nconst CartPage = (props) => {\r\n  const [currentUser, setCurrentUser] = useState();\r\n\r\n  useEffect(() => {\r\n    setCurrentUser(props.token);\r\n    if (currentUser) {\r\n      props.onFetchCart(props.token, props.userId);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const onRemoveProduct = (product) => {\r\n    const productId = product._id;\r\n\r\n    props.onRemoveItem(props.token, props.userId, productId);\r\n  };\r\n\r\n  let cart = <Spinner></Spinner>;\r\n\r\n  if (!props.loading && props.cart.products.length === 0) {\r\n    cart = (\r\n      <Wrapper>\r\n        <CartItemList>\r\n          <NoProduct>\r\n            <li className=\"no-product cart-item\">\r\n              <h2>There are no products in your Cart.</h2>\r\n            </li>\r\n          </NoProduct>\r\n        </CartItemList>\r\n      </Wrapper>\r\n    );\r\n  }\r\n\r\n  if (!props.loading && props.cart.products.length >= 1) {\r\n    cart = (\r\n      <React.Fragment>\r\n        <CartItemList>\r\n          {props.cart.products.map((product) => {\r\n            return (\r\n              <CartItem\r\n                key={product.productId._id}\r\n                productId={product.productId}\r\n                quantity={product.quantity}\r\n                onDelete={onRemoveProduct}\r\n              ></CartItem>\r\n            );\r\n          })}\r\n        </CartItemList>\r\n        <NavLink to=\"/checkout\" className=\"cart-btn\">\r\n          Order Now!\r\n        </NavLink>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  return <Cart>{cart}</Cart>;\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    cart: state.cart,\r\n    loading: state.cart.loading,\r\n    totalPrice: state.cart.totalPrice,\r\n    error: state.cart.error,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onFetchCart: (token, userId) => {\r\n      dispatch(cartActionTypes.asyncFetchCartStart(token, userId));\r\n    },\r\n    onRemoveItem: (token, userId, productId) => {\r\n      dispatch(\r\n        cartActionTypes.asyncRemoveFromCartStart(token, userId, productId)\r\n      );\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CartPage);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}